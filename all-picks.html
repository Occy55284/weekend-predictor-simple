<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>All Weekly Picks • Weekend Predictor</title>
  <link rel="stylesheet" href="brand.css?v=96" />

  <style>
    .page-header-title { margin-bottom: 4px; }
    .controls-row {
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-top:4px;
    }
    .controls-row .muted {
      font-size:0.85rem;
    }
    .pill-select {
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      background:rgba(15,23,42,0.96);
      color:#e5e7eb;
      padding:4px 10px;
      font-size:0.85rem;
    }
    .subtext {
      font-size:0.8rem;
      color:#9ca3af;
      margin-top:6px;
    }
    .table-sm {
      font-size:0.85rem;
    }
    .table-sm th,
    .table-sm td {
      padding:6px 6px;
    }
    .fixture-tag {
      font-size:0.78rem;
      text-transform:uppercase;
      letter-spacing:.09em;
      color:#9ca3af;
    }
    .fixture-main {
      font-weight:600;
      color:#e5e7eb;
    }
    .player-name {
      font-weight:500;
      color:#e5e7eb;
    }
    .badge-pill {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      font-size:0.75rem;
      color:#e5e7eb;
      background:rgba(15,23,42,0.96);
    }
    .badge-live {
      border-color:#22c55e;
      color:#22c55e;
    }
  </style>
</head>
<body class="bg-hero">
  <div class="page-shell">

    <!-- NAV -->
    <header class="top-nav">
      <div class="top-nav-left">
        <div class="nav-logo">
          <img src="assets/brand-logo.png" alt="Weekend Predictor logo" />
        </div>
        <div class="nav-text-group">
          <div class="nav-title">Weekend Predictor</div>
          <div class="nav-subtitle">See every player’s weekly picks</div>
        </div>
      </div>
      <nav class="top-nav-links">
        <a href="index.html">Home</a>
        <a href="predict.html">Predict</a>
        <a href="leaderboard.html">Leaderboard</a>
        <a href="my-picks.html">My Picks</a>
        <a href="all-picks.html" class="active">All Picks</a>
        <a href="profile.html">Profile</a>
        <a href="admin.html" id="navAdmin" style="display:none">Admin</a>
        <a href="login.html" id="navLogout">Logout</a>
      </nav>
    </header>

    <main class="main-layout">
      <!-- MAIN PANEL -->
      <section class="panel panel-main wide">
        <div class="panel-inner">
          <h1 class="page-header-title">All weekly picks</h1>

          <div class="controls-row">
            <p class="muted" id="weekLabel">Current gameweek (Mon–Sun)</p>

            <div style="display:flex;gap:8px;align-items:center;">
              <span class="muted" style="font-size:0.8rem;">Week</span>
              <select class="pill-select" disabled>
                <option>Current week</option>
              </select>
            </div>
          </div>

          <p class="subtext">
            This page will show every player’s prediction for each featured fixture in the current week.
          </p>

          <div class="table-wrapper" style="margin-top:12px;">
            <table class="table table-sm">
              <thead>
                <tr>
                  <th style="width:32%;">Fixture</th>
                  <th style="width:22%;">Player</th>
                  <th style="width:16%;">Home</th>
                  <th style="width:16%;">Away</th>
                  <th style="width:14%;">Status</th>
                </tr>
              </thead>
              <tbody>
                <!-- Example rows – just mock data for now -->
                <tr>
                  <td>
                    <div class="fixture-tag">Sat 15:00</div>
                    <div class="fixture-main">Arsenal vs Spurs</div>
                  </td>
                  <td><span class="player-name">Occy</span></td>
                  <td>2</td>
                  <td>1</td>
                  <td><span class="badge-pill badge-live">Locked</span></td>
                </tr>
                <tr>
                  <td>
                    <div class="fixture-tag">Sat 15:00</div>
                    <div class="fixture-main">Arsenal vs Spurs</div>
                  </td>
                  <td><span class="player-name">Serdi</span></td>
                  <td>1</td>
                  <td>1</td>
                  <td><span class="badge-pill">Pending</span></td>
                </tr>
                <tr>
                  <td>
                    <div class="fixture-tag">Sat 17:30</div>
                    <div class="fixture-main">Liverpool vs Chelsea</div>
                  </td>
                  <td><span class="player-name">Mark2</span></td>
                  <td>3</td>
                  <td>2</td>
                  <td><span class="badge-pill badge-live">Locked</span></td>
                </tr>
                <tr>
                  <td>
                    <div class="fixture-tag">Sat 17:30</div>
                    <div class="fixture-main">Liverpool vs Chelsea</div>
                  </td>
                  <td><span class="player-name">Serdi</span></td>
                  <td>2</td>
                  <td>0</td>
                  <td><span class="badge-pill">Pending</span></td>
                </tr>
              </tbody>
            </table>
          </div>

          <p class="subtext" style="margin-top:10px;">
            Later we’ll add filters (by player, by fixture) and show points once results are in.
          </p>
        </div>
      </section>

      <!-- SIDE PANEL -->
      <aside class="panel panel-side">
        <div class="panel-inner">
          <h2>Planned behaviour</h2>
          <ul class="bullet-list">
            <li>Auto-load current week’s featured fixtures.</li>
            <li>Show every player who has locked picks.</li>
            <li>Optional filters: by player or by fixture.</li>
            <li>Future: show points per pick once matches finish.</li>
          </ul>
        </div>
      </aside>
    </main>
  </div>

  <!-- Small script: set week label + (later) admin/logout wiring -->
  <script type="module">
    import { supabase } from './supabase-config.js';

    const weekLabel = document.getElementById('weekLabel');
    const navAdmin  = document.getElementById('navAdmin');
    const navLogout = document.getElementById('navLogout');

    // Week label (same logic as predict page)
    function pad(n){ return String(n).padStart(2,'0'); }
    function startOfWeek(d=new Date()){
      const x = new Date(d);
      const day = x.getDay() === 0 ? 7 : x.getDay();
      x.setHours(0,0,0,0);
      x.setDate(x.getDate() - (day - 1));
      return x;
    }
    function addDays(d,n){ const x = new Date(d); x.setDate(x.getDate()+n); return x; }

    const ws = startOfWeek();
    const we = addDays(ws,7);
    weekLabel.textContent = `Current week: ${ws.toLocaleDateString()} – ${addDays(ws,6).toLocaleDateString()} (Mon–Sun)`;

    // Optional: show Admin link if user is admin
    (async () => {
      const { data: { session } } = await supabase.auth.getSession();
      const user = session?.user;
      if (!user) return;

      try {
        const { data } = await supabase
          .from('profiles')
          .select('is_admin')
          .eq('id', user.id)
          .maybeSingle();
        if (data?.is_admin) navAdmin.style.display = '';
      } catch {}

      navLogout?.addEventListener('click', async (e) => {
        e.preventDefault();
        try { await supabase.auth.signOut(); } catch {}
        window.location.replace('login.html');
      });
    })();
  </script>
</body>
</html>
